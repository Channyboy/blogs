---
layout: post
title: "MicroProfile Language Support for Open Liberty Applications"
categories: blog
author_picture: https://avatars3.githubusercontent.com/kathrynkodama
author_github: https://github.com/kathrynkodama
seo-title: MicroProfile Language Support for Open Liberty Applications - OpenLiberty.io
seo-description: Leverage the new MicroProfile Language Server along with Visual Studio Code tools to develop your cloud-native Java applications with Eclipse MicroProfile APIs and Open Liberty.
blog_description: "Leverage the new MicroProfile Language Server along with VS Code tools to develop your Eclipse MicroProfile applications with Open Liberty."
---
= MicroProfile Language Support for Open Liberty Applications
Kathryn Kodama <https://github.com/kathrynkodama>

The new MicroProfile Language Server provides added support for developing your Eclipse MicroProfile applications with Open Liberty. Earlier this month, the first release of the Language Server for Eclipse MicroProfile (https://github.com/eclipse/lsp4mp[Eclipse LSP4MP]), which is an open incubator project under the Eclipse Foundation, was published. The Tools for MicroProfile VS Code extension consumes this language server, providing feature-rich support for MicroProfile APIs and properties in VS Code.

In this blog, we will showcase how the new MicroProfile Language Server, along with existing tooling for VS Code, makes it even easier to develop your Open Liberty applications.

== Installing the extensions

Install the https://marketplace.visualstudio.com/items?itemName=MicroProfile-Community.vscode-microprofile-pack[MicroProfile extension pack] from the VS Code Marketplace to support developing your Open Liberty applications with MicroProfile. We will use the following extensions from the MicroProfile extension pack:

- https://marketplace.visualstudio.com/items?itemName=redhat.vscode-microprofile[Tools for MicroProfile]: Language support for MicroProfile APIs and properties via the https://github.com/eclipse/lsp4mp[Language Server for Eclipse].

- https://marketplace.visualstudio.com/items?itemName=Open-Liberty.liberty-dev-vscode-ext[Open Liberty Tools]: Support for development with Open Liberty.

- https://marketplace.visualstudio.com/items?itemName=MicroProfile-Community.mp-starter-vscode-ext[MicroProfile Starter]: Quickly generate a MicroProfile Maven project.

== Setting up the project

You can either <<create-a-new-microprofile-project,create a new MicroProfile project>> or <<configure-an-existing-project,configure an existing project>>.

=== Create a new MicroProfile project

Generate a new Open Liberty Maven application with the MicroProfile Starter in VS Code.

1. Run the `MicroProfile: Generate a new MicroProfile Starter Project` command from the VS Code command palette.
2. Enter your desired `groupId` and `artifactId`.
3. Select the latest MicroProfile Version (Version 3.3).
4. Select "Open Liberty" as your runtime server.
5. Select your desired Java version.
6. Select the MicroProfile specs you would like included in your project.
7. Select the folder you would like to generate your project into.

[.img_border_light]
image::/img/blog/mp-starter-vscode-marketplace.png[MicroProfile Starter for VS Code,width=50%,align="center"]

=== Configure an existing project

Modify an existing Maven or Gradle project for use with Open Liberty and MicroProfile.

For Maven projects, add the Liberty Maven Plugin to your `pom.xml` file.

[source,xml]
----
<plugin>
    <groupId>io.openliberty.tools</groupId>
    <artifactId>liberty-maven-plugin</artifactId>
    <version>3.3-M3</version>
</plugin>
----

Add the MicroProfile dependency to your `pom.xml` file.

[source, xml]
----
<dependency>
    <groupId>org.eclipse.microprofile</groupId>
    <artifactId>microprofile</artifactId>
    <version>3.3</version>
    <type>pom</type>
    <scope>provided</scope>
</dependency>
----

For Gradle projects, add the Liberty Gradle Plugin to your `build.gradle` file.

[source,groovy]
----
apply plugin: 'liberty'

buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'io.openliberty.tools:liberty-gradle-plugin:3.1-M2'
    }
}
----

Add the MicroProfile dependency to your `build.gradle` file.

[source,groovy]
----
dependencies {
    providedCompile 'org.eclipse.microprofile:microprofile:3.3'
}
----

Add the MicroProfile features you would like to use in your Open Liberty `server.xml` file. For convenience, we have specified `microprofile-3.3` to include all of the MicroProfile features.

[source, xml]
----
<featureManager>
    <feature>microProfile-3.3</feature>
</featureManager>
----

== Starting dev mode

Start your Open Liberty application in dev mode using the Liberty Dev Dashboard provided by the Open Liberty Tools VS Code extension. Alternatively, start dev mode via command line using `mvn liberty:dev`/`gradle libertyDev`. Dev mode provides hot reload and deployment, so your code changes will automatically be reflected in your running application.

[.img_border_light]
image::/img/blog/liberty-dev-dashboard-vscode.png[Liberty Dev Dashboard in VS Code,width=50%,align="center"]

== Developing with MicroProfile language support

The MicroProfile Language Server provides useful features such as snippets, completion, hover, and diagnostics for both Java and properties files.

=== Coding assistance with Java source files

Use a snippet to quickly insert popular code blocks. For example, the `mpreadiness` snippet inserts a fully functional MicroProfile Health Readiness check class. Open Liberty dev mode will automatically pick up any changes and recompile your source code so that you can immediately access your new health class at the `/health` endpoint.

[.img_border_light]
image::/img/blog/mp-readiness-snippet.gif[MicroProfile readiness snippet,align="center"]

The MicroProfile Language Server has knowledge of the MicroProfile APIs, meaning the language server will validate and correct improper usage of MicroProfile APIs in your source code. For example, as per the MicroProfile Health specification, all MicroProfile Health classes using the `@Readiness` or `@Liveness` annotations must implement the `HealthCheck` class. The MicroProfile Language Server will correct you where needed with a helpful diagnostic.

[.img_border_light]
image::/img/blog/mp-health-diagnostics.gif[MicroProfile Health diagnostic,align="center"]

=== Coding assistance with MicroProfile properties

The MicroProfile Language Server also provides useful features for your MicroProfile Config properties file.

Hover allows you to see the value of your MicroProfile property from within your Java code.

[.img_border_light]
image::/img/blog/mp-java-properties-hover.png[MicroProfile Java properties hover,align="center",width=50%,align="center"]

Referenced a property in your source code that hasn't yet been implemented in your properties file? Code completion along with validation helps you specify the correct property and type.

[.img_border_light]
image::/img/blog/mp-properties-diagnostic.gif[MicroProfile properties completion and diagnostic,align="center"]

== Next steps

Using the tools in VS Code for Open Liberty and MicroProfile means that the finer details of your application, such as deployment and API usage, are handled for you. As a developer, you can code with greater efficiency and focus your efforts on the important aspects of your application.

This blog post highlighted just a few of the features provided by the MicroProfile Language Server. Check out the https://github.com/eclipse/lsp4mp#features[full list of features] for more information or read the https://microprofile.io/2020/09/25/announcement-language-server-for-microprofile-and-the-tools-for-microprofile-vs-code-extension/[MicroProfile announcement blog post]. 

Learn more about https://openliberty.io/blog/2019/11/13/liberty-dev-mode-vscode.html[Open Liberty Tools for VS Code] in our previous blog post.

Contribute to the code over at GitHub or open a https://github.com/eclipse/lsp4mp/issues[GitHub issue] if there are any features you want to see included in future versions of the MicroProfile Language Server.

Chat with us on Gitter:

- https://gitter.im/redhat-developer/vscode-microprofile[vscode-microprofile Gitter]

- https://gitter.im/eclipse/microprofile-languageserver[microprofile-languageserver Gitter]
